<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Design-Aware AI Coding Platform</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <main class="container">
    <header class="hero">
      <div class="hero-text">
        <span class="eyebrow">설계 인지형 AI 코딩 플랫폼</span>
        <h1>설계로 안내하고, 도구로 검증합니다.</h1>
        <p class="subtitle">
          설계 문서를 RAG로 검색하고 메모리 스냅샷과 MCP 품질도구로 결과를 검증합니다.
        </p>
        <div class="hero-actions">
          <div id="apiStatus" class="status-pill">API: 알 수 없음</div>
          <div id="mcpStatus" class="status-pill">MCP: 알 수 없음</div>
        </div>
      </div>
      <div class="hero-card">
        <h3>이 데모에서 확인할 수 있는 것</h3>
        <ul class="hero-list">
          <li>RAG 기반 컨텍스트 주입</li>
          <li>MCP 서버 기반 lint/test/coverage</li>
          <li>Run 히스토리와 운영 지표</li>
        </ul>
      </div>
    </header>

    <section class="panel" id="run-console">
      <div class="section-header">
        <h2>실행 콘솔</h2>
        <div class="section-actions">
          <button id="refreshOpsBtn" class="ghost">운영 새로고침</button>
        </div>
      </div>

      <div class="row">
        <div class="field">
          <label>프로젝트 ID</label>
          <input id="projectId" placeholder="default" />
        </div>
        <div class="field">
          <label>작업 유형</label>
          <select id="taskType">
            <option value="code_generation">코드 생성</option>
            <option value="refactoring">리팩터링</option>
            <option value="code_review">코드 리뷰</option>
          </select>
        </div>
      </div>

      <div class="field">
        <label>요청 내용</label>
        <textarea id="userInput" rows="6" placeholder="원하는 변경을 설명하세요..."></textarea>
      </div>

      <div class="actions">
        <button id="runBtn">작업 실행</button>
        <div id="loading" class="loading hidden">
          <span class="spinner"></span>
          <span>에이전트 파이프라인 실행 중...</span>
        </div>
      </div>

      <div id="errorBox" class="error hidden"></div>
    </section>

    <section class="panel" id="results">
      <div class="section-header">
        <h2>최근 실행</h2>
        <button id="copyAllBtn" class="ghost">전체 JSON 복사</button>
      </div>

      <div class="grid">
        <div class="card">
          <div class="card-header">
            <h3>생성된 코드</h3>
            <button id="copyCodeBtn" class="ghost">복사</button>
          </div>
          <pre id="llmOutput" class="code-block"></pre>
        </div>

        <div class="card">
          <div class="card-header">
            <h3>생성된 테스트</h3>
            <button id="copyTestBtn" class="ghost">복사</button>
          </div>
          <pre id="testOutput" class="code-block"></pre>
        </div>

        <div class="card">
          <h3>메모리 스냅샷</h3>
          <div id="memorySnapshot" class="text-block"></div>
        </div>

        <div class="card">
          <h3>검색된 컨텍스트</h3>
          <ol id="retrievedContext" class="context-list"></ol>
        </div>

        <div class="card">
          <h3>품질 리포트</h3>
          <div id="qualityReport" class="report-grid"></div>
        </div>

        <div class="card">
          <h3>실행 메타데이터</h3>
          <div id="runMeta" class="meta-grid"></div>
        </div>
      </div>

      <details class="raw">
        <summary>Raw JSON 응답</summary>
        <pre id="result"></pre>
      </details>
    </section>

    <section class="panel" id="ops">
      <div class="section-header">
        <h2>운영 대시보드</h2>
        <div class="section-actions">
          <button id="clearRunsBtn" class="ghost">실행 기록 비우기</button>
        </div>
      </div>

      <div class="ops-grid">
        <div class="card">
          <h3>실행 기록</h3>
          <div id="runHistory" class="history-list"></div>
        </div>

        <div class="card">
          <h3>프롬프트 레지스트리</h3>
          <div id="promptList" class="prompt-list"></div>
        </div>

        <div class="card">
          <h3>메모리 통계</h3>
          <div id="memoryStats" class="stats-grid"></div>
        </div>
      </div>
    </section>
  </main>

  <script src="app.js"></script>
</body>
</html>
